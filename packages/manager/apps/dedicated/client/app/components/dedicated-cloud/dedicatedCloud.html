<div id="main-container" data-ui-view="dedicatedCloudView">
    <header class="oui-header">
        <div class="oui-header__container">
            <div class="oui-header__content">
                <div class="d-flex">
                    <h1
                        class="oui-header__title"
                        data-ng-bind="$ctrl.dedicatedCloud.description"
                    ></h1>
                    <button
                        type="button"
                        class="btn btn-icon ml-2"
                        data-ng-click=":: $ctrl.editDescription($ctrl.dedicatedCloud.description)"
                    >
                        <span
                            class="oui-icon oui-icon-pen_concept"
                            aria-hidden="true"
                        ></span>
                        <span
                            class="sr-only"
                            data-translate="{{::Â 'wizard_modify' | translate }}"
                        ></span>
                    </button>
                </div>

                <h2
                    class="oui-header__description"
                    data-ng-bind=":: $ctrl.dedicatedCloud.serviceName"
                ></h2>
            </div>
        </div>

        <oui-header-tabs>
            <oui-header-tabs-item
                href="{{:: $ctrl.pccDashboardLink }}"
                active="$ctrl.currentActiveLink() === $ctrl.pccDashboardLink"
                ><span data-translate="dedicatedCloud_tab_dashboard"></span
            ></oui-header-tabs-item>

            <oui-header-tabs-item
                data-ng-if=":: !$ctrl.dedicatedCloud.isExpired"
                href="{{:: $ctrl.datacentersLink }}"
                active="$ctrl.currentActiveLink() === $ctrl.datacentersLink"
                ><span data-translate="dedicatedCloud_tab_datacenter"></span
            ></oui-header-tabs-item>

            <oui-header-tabs-item
                data-ng-if=":: !$ctrl.dedicatedCloud.isExpired"
                href="{{:: $ctrl.usersLink }}"
                active="$ctrl.currentActiveLink() === $ctrl.usersLink"
                ><span data-translate="dedicatedCloud_tab_user"></span
            ></oui-header-tabs-item>

            <oui-header-tabs-item
                data-ng-if=":: !$ctrl.dedicatedCloud.isExpired"
                href="{{:: $ctrl.securityLink }}"
                active="$ctrl.currentActiveLink() === $ctrl.securityLink"
                ><span data-translate="dedicatedCloud_tab_security"></span
            ></oui-header-tabs-item>

            <oui-header-tabs-item
                data-ng-if=":: !$ctrl.dedicatedCloud.isExpired"
                href="{{:: $ctrl.operationLink }}"
                active="$ctrl.currentActiveLink() === $ctrl.operationLink"
                ><span data-translate="dedicatedCloud_tab_operation"></span
            ></oui-header-tabs-item>

            <oui-header-tabs-item
                data-ng-if=":: !$ctrl.dedicatedCloud.isExpired"
                href="{{:: $ctrl.licenseLink }}"
                active="$ctrl.currentActiveLink() === $ctrl.licenseLink"
                ><span data-translate="dedicatedCloud_tab_license"></span
            ></oui-header-tabs-item>
        </oui-header-tabs>
    </header>

    <div class="tab-content">
        <div data-ovh-alert="dedicatedCloud"></div>

        <oui-message class="mb-1" type="info" ng-if="$ctrl.surveyUrl">
            <span data-translate="dedicatedCloud_survey"></span>
            <a
                data-ng-href="{{ $ctrl.surveyUrl }}"
                data-track-on="click"
                data-track-name="alert::hpc::go-to-hpc-survey"
                target="_blank"
                rel="noopener"
            >
                <span data-translate="dedicatedCloud_survey_link"></span>
            </a>
        </oui-message>
        <div data-ui-view="pccView">
            <ovh-manager-dedicated-cloud-datacenter-drp-alerts
                data-current-drp="$ctrl.currentDrp"
                data-current-user="$ctrl.currentUser"
                data-go-to-vpn-configuration="$ctrl.goToVpnConfiguration"
                data-pcc-type="$ctrl.pccType"
            ></ovh-manager-dedicated-cloud-datacenter-drp-alerts>

            <ovh-manager-pcc-dashboard-legacy
                data-current-drp="$ctrl.currentDrp"
                data-current-service="$ctrl.currentService"
                data-current-user="$ctrl.currentUser"
                data-datacenter-list="$ctrl.datacenterList"
                data-delete-drp="$ctrl.deleteDrp"
                data-disable-vmware-option="$ctrl.disableVmwareOption"
                data-drp-global-status="$ctrl.drpGlobalStatus"
                data-edit-details="$ctrl.editDetails"
                data-go-to-drp="$ctrl.goToDrp"
                data-go-to-drp-datacenter-selection="$ctrl.goToDrpDatacenterSelection"
                data-go-to-vpn-configuration="$ctrl.goToVpnConfiguration"
                data-is-drp-action-possible="$ctrl.isDrpActionPossible"
                data-on-terminate="$ctrl.onTerminate"
                data-on-ml-subscribe="$ctrl.onMlSubscribe"
                data-order-security-option="$ctrl.orderSecurityOption"
                data-order-vmware-option="$ctrl.orderVmwareOption"
                data-product-id="$ctrl.productId"
                data-show-mailing-list="$ctrl.isMailingListSubscriptionAvailable"
                data-set-message="$ctrl.setMessage"
                data-ng-if="$ctrl.currentService.usesLegacyOrder"
            ></ovh-manager-pcc-dashboard-legacy>

            <div
                class="row d-md-flex mb-5"
                data-ng-if="!$ctrl.currentService.usesLegacyOrder && !$ctrl.currentService.isExpired"
            >
                <div class="col-md-4">
                    <ovh-manager-pcc-dashboard-general-information
                        data-current-service="$ctrl.currentService"
                        data-edit-details="$ctrl.editDetails"
                        data-on-upgrade-version="$ctrl.onUpgradeVersion"
                        data-on-associate-ip-block="$ctrl.onAssociateIpBlock"
                        data-on-execution-date-change="$ctrl.onExecutionDateChange"
                        data-tracking-prefix="$ctrl.trackingPrefix"
                    ></ovh-manager-pcc-dashboard-general-information>
                </div>

                <div class="col-md-4">
                    <ovh-manager-pcc-dashboard-options
                        data-current-drp="$ctrl.currentDrp"
                        data-current-service="$ctrl.currentService"
                        data-current-user="$ctrl.currentUser"
                        data-datacenter-list="$ctrl.datacenterList"
                        data-delete-drp="$ctrl.deleteDrp"
                        data-drp-global-status="$ctrl.drpGlobalStatus"
                        data-go-to-drp="$ctrl.goToDrp"
                        data-go-to-drp-datacenter-selection="$ctrl.goToDrpDatacenterSelection"
                        data-go-to-vpn-configuration="$ctrl.goToVpnConfiguration"
                        data-is-drp-action-possible="$ctrl.isDrpActionPossible"
                        data-on-basic-options-upgrade="$ctrl.onBasicOptionsUpgrade(stateParams)"
                        data-on-certification-upgrade="$ctrl.onCertificationUpgrade(stateParams)"
                        data-on-configuration-only-upgrade="$ctrl.onConfigurationOnlyUpgrade(stateParams)"
                    ></ovh-manager-pcc-dashboard-options>
                </div>

                <div class="col-md-4">
                    <ovh-manager-pcc-dashboard-service-management
                        data-current-service="$ctrl.currentService"
                        data-current-user="$ctrl.currentUser"
                        data-show-mailing-list="$ctrl.isMailingListSubscriptionAvailable"
                        data-on-ml-subscribe="$ctrl.onMlSubscribe()"
                        data-on-terminate="$ctrl.onTerminate()"
                    ></ovh-manager-pcc-dashboard-service-management>
                </div>
            </div>
        </div>
    </div>
</div>
