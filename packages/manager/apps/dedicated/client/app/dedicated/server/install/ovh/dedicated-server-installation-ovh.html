<h3 data-translate="server_configuration_installation_title"></h3>
<oui-stepper on-finish="$ctrl.saveRemainingSize()">
    <oui-step-form
        data-prevent-next="true"
        data-valid="!$ctrl.loader.loading && $ctrl.installation.selectDistribution && $ctrl.installation.selectLanguage && !$ctrl.installation.warningExistPartition"
        data-on-focus="$ctrl.load()"
        data-on-submit="$ctrl.checkNextStep1"
        data-loading="$ctrl.loader.loading"
    >
        <p
            data-translate="server_configuration_installation_ovh_step1_info"
            data-translate-values="{ t0: $ctrl.data.server.name }"
        ></p>
        <div class="form-group">
            <label
                for="selectDesktopType"
                class="control-label"
                data-translate="server_configuration_installation_ovh_step1_desktop"
            >
            </label>
            <select
                class="form-control"
                id="selectDesktopType"
                name="selectDesktopType"
                data-ng-options="desktop as ('server_configuration_installation_ovh_desktop_' + desktop | translate) for desktop in $ctrl.installation.desktopType"
                data-ng-model="$ctrl.installation.selectDesktopType"
                data-ng-change="$ctrl.installation.hasData = false; $ctrl.setSelectDistribution(null);"
            >
            </select>
        </div>
        <p data-ng-if="$ctrl.hasLicencedOs()">
            <span
                data-translate="server_configuration_installation_ovh_step1_desktop_licence_info_label"
            ></span>
            <i
                class="fa fa-question-circle"
                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step1_desktop_licence_info_text' | translate }}"
                data-oui-tooltip-placement="bottom"
            >
            </i>
        </p>
        <div
            class="panel-group"
            id="accordion"
            role="tablist"
            aria-multiselectable="true"
        >
            <div
                class="panel panel-default panel-accordion"
                data-ng-repeat="itemFamily in $ctrl.installation.familyType track by $index"
                data-ng-show="$ctrl.countFilter[itemFamily] > 0"
            >
                <div class="panel-heading" role="tab" id="heading-{{ $index }}">
                    <h4 class="panel-title">
                        <a
                            class="d-block collapsed"
                            role="button"
                            href="#collapse-{{ $index }}"
                            aria-expanded="true"
                            aria-controls="collapse-{{ $index }}"
                            data-ng-click="$ctrl.installation.selectFamily = itemFamily; $event.preventDefault();"
                            data-toggle="collapse"
                            data-parent="#accordion"
                            data-ng-bind="itemFamily + ' (' + $ctrl.countFilter[itemFamily] + ')'"
                        >
                        </a>
                    </h4>
                </div>
                <div
                    id="collapse-{{ $index }}"
                    class="panel-collapse collapse"
                    role="tabpanel"
                    aria-labelledby="heading-{{ $index }}"
                >
                    <div class="panel-body">
                        <div
                            class="radio mb-4"
                            data-ng-repeat="distribution in $ctrl.getCountFilter(itemFamily) | orderBy:'displayName' track by $index"
                        >
                            <label>
                                <input
                                    type="radio"
                                    id="distribution-{{ $index }}"
                                    name="distribution"
                                    data-ng-click="$ctrl.setSelectDistribution(distribution)"
                                />
                                <span
                                    class="d-block"
                                    data-ng-class="{ 'text-danger': distribution.isDeprecated }"
                                    data-ng-bind="distribution.displayName"
                                >
                                </span>
                                <span>
                                    <span
                                        class="text-muted"
                                        data-translate="{{ 'server_configuration_installation' + distribution.bitFormat }}"
                                    >
                                    </span>
                                    <span
                                        class="text-warning"
                                        data-ng-show="distribution.isDeprecated "
                                        data-translate="server_configuration_installation_deprecated"
                                    >
                                    </span>
                                    <span
                                        class="text-warning"
                                        data-ng-show="$ctrl.data.server.raidController && distribution.hardRaidConfiguration === false"
                                        data-translate="server_configuration_installation_ovh_step1_hardwareRaid_os_not_supported_short"
                                    >
                                    </span>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <p
            class="text-danger"
            data-ng-if="!$ctrl.hasVirtualDesktop()"
            data-ng-bind-html="'server_configuration_installation_ovh_step1_virtual_desktop_not_supported' | translate:{ t0: $ctrl.installation.selectDistribution.displayName, t1: '#/configuration/license' }"
        ></p>
        <div
            class="form-group"
            data-ng-show="$ctrl.installation.selectDistribution && !$ctrl.installation.warningExistPartition"
        >
            <label
                for="selectLanguage"
                class="control-label"
                data-translate="server_configuration_installation_step1_language"
            >
            </label>
            <select
                class="form-control"
                id="selectLanguage"
                name="selectLanguage"
                data-ng-options="language as language for language in $ctrl.installation.selectDistribution.availableLanguages"
                data-ng-model="$ctrl.installation.selectLanguage"
            >
            </select>
        </div>
        <div class="control-group clearfix">
            <label
                for="diskGroup"
                class="control-label"
                data-translate="server_configuration_installation_ovh_step1_disk_group"
            >
            </label>
            <select
                class="form-control float-left w-50 mr-4"
                id="diskGroup"
                name="diskGroup"
                data-ng-model="$ctrl.installation.diskGroup"
                data-ng-options="diskGroup as diskGroup.description for diskGroup in $ctrl.informations.diskGroups track by diskGroup.diskGroupId"
                data-ng-disabled="!$ctrl.canEditDiskGroup()"
            >
            </select>
            <oui-spinner
                class="align-middle"
                aria-label="{{ 'common_loading' | translate }}"
                data-ng-if="$ctrl.loader.loadingCapabilities"
                data-size="s"
            >
            </oui-spinner>
        </div>
        <span
            class="text-danger"
            data-ng-if="$ctrl.canEditDiskGroup() && $ctrl.raidIsPersonnalizable()"
            data-translate="server_configuration_installation_ovh_step1_disk_group_warning"
            data-translate-values="{ t0: $ctrl.informations.diskGroups[0].description }"
        >
        </span>

        <div
            data-ng-hide="$ctrl.installation.warningExistPartition || $ctrl.informations.gabaritName != null"
        >
            <div
                class="checkbox"
                data-ng-class="{
                        'disabled': !$ctrl.canPersonnalizeRaid()
                    }"
            >
                <label>
                    <input
                        type="checkbox"
                        data-ng-model="$ctrl.installation.raidSetup"
                        data-ng-disabled="!$ctrl.canPersonnalizeRaid()"
                    />
                    <span
                        data-translate="server_configuration_installation_ovh_step1_hardwareRaid"
                    ></span>
                </label>
            </div>
            <p class="text-danger">
                <span
                    data-ng-if="$ctrl.installation.selectDistribution.hardRaidConfiguration === false"
                    data-translate="server_configuration_installation_ovh_step1_hardwareRaid_os_not_supported"
                >
                </span>
                <span
                    data-ng-if="$ctrl.informations.hardwareRaid.error.wrongLocation"
                    data-translate="server_configuration_installation_ovh_step1_hardwareRaid_wrong_location"
                >
                </span>
            </p>
        </div>

        <div
            class="checkbox"
            data-ng-hide="$ctrl.installation.warningExistPartition || $ctrl.informations.gabaritName != null"
            data-ng-class="{
                    'disabled': $ctrl.informations.gabaritName != null
                }"
        >
            <label>
                <input
                    type="checkbox"
                    data-ng-model="$ctrl.installation.customInstall"
                    data-ng-disabled="$ctrl.informations.gabaritName != null"
                />
                <span
                    data-translate="server_configuration_installation_ovh_step1_custom"
                ></span>
            </label>
        </div>

        <div data-ng-show="$ctrl.installation.warningExistPartition">
            <p
                class="text-danger"
                data-ng-bind-html="'server_configuration_installation_ovh_step1_warning_exist' | translate:{ t0: $ctrl.installation.selectDistribution.displayName }"
            ></p>
            <p class="text-center">
                <button
                    type="button"
                    class="btn btn-link mb-3"
                    data-ng-click="$ctrl.cancelSetSelectDistribution()"
                    data-translate="server_configuration_installation_ovh_step1_warning_exist_cancel"
                ></button>
                <button
                    type="button"
                    class="btn btn-default"
                    data-ng-click="$ctrl.setSelectDistribution($ctrl.installation.saveSelectDistribution, true)"
                    data-translate="server_configuration_installation_ovh_step1_warning_exist_valid"
                ></button>
            </p>
        </div>
    </oui-step-form>

    <oui-step-form
        data-prevent-next="true"
        data-valid="!$ctrl.loader.loading
            && $ctrl.installation.hardwareRaid.controller
            && $ctrl.installation.hardwareRaid.raid
            && $ctrl.installation.hardwareRaid.disks
            && $ctrl.installation.hardwareRaid.arrays
            && !$ctrl.installation.hardwareRaid.error"
        data-on-focus="$ctrl.reduceModal"
        data-on-submit="$ctrl.checkNextStep2"
        data-loading="$ctrl.loader.loading"
    >
        <p
            data-ng-if="$ctrl.informations.hardwareRaid.profile.controllers.length === 0"
            data-translate="server_configuration_installation_ovh_stephardraid_error_empty_controller"
        ></p>
        <form
            id="hardwareRaidForm"
            name="hardwareRaidForm"
            data-ng-if="$ctrl.informations.hardwareRaid.profile.controllers.length > 0"
        >
            <p
                data-translate="server_configuration_installation_ovh_stephardraid_info"
            ></p>
            <div class="form-group">
                <label
                    for="hardwareRaidController"
                    class="control-label"
                    data-translate="server_configuration_installation_ovh_stephardraid_label_controllers"
                >
                </label>
                <select
                    class="form-control"
                    id="hardwareRaidController"
                    name="hardwareRaidController"
                    data-ng-options="controller as (controller.model + ' (' + controller.type + ')') for controller in $ctrl.informations.hardwareRaid.profile.controllers"
                    data-ng-model="$ctrl.installation.hardwareRaid.controller"
                >
                </select>
            </div>

            <div class="form-group">
                <label
                    for="hardwareRaidRaidMode"
                    class="control-label"
                    data-translate="server_configuration_installation_ovh_stephardraid_label_raid"
                >
                </label>
                <select
                    class="form-control"
                    id="hardwareRaidRaidMode"
                    name="hardwareRaidRaidMode"
                    data-ng-if="$ctrl.installation.hardwareRaid.controller"
                    data-ng-options="raid as raid for raid in $ctrl.informations.hardwareRaid.availableRaids | orderBy:'toString()'"
                    data-ng-model="$ctrl.installation.hardwareRaid.raid"
                >
                </select>
            </div>

            <div class="form-group">
                <label
                    for="hardwareRaidNbDisks"
                    class="control-label"
                    data-translate="server_configuration_installation_ovh_stephardraid_label_disks"
                >
                </label>
                <select
                    class="form-control"
                    id="hardwareRaidNbDisks"
                    name="hardwareRaidNbDisks"
                    data-ng-if="$ctrl.installation.hardwareRaid.raid"
                    data-ng-options="disk as disk for disk in $ctrl.informations.hardwareRaid.availableDisks"
                    data-ng-model="$ctrl.installation.hardwareRaid.disks"
                >
                </select>
            </div>

            <div class="form-group">
                <label
                    for="hardwareaRidNbArrays"
                    class="control-label"
                    data-translate="server_configuration_installation_ovh_stephardraid_label_arrays"
                >
                </label>
                <select
                    id="hardwareaRidNbArrays"
                    class="form-control"
                    name="hardwareaRidNbArrays"
                    data-ng-if="$ctrl.installation.hardwareRaid.disks"
                    data-ng-model="$ctrl.installation.hardwareRaid.arrays"
                    data-ng-options="array as array for array in $ctrl.informations.hardwareRaid.availableArrays"
                >
                </select>
            </div>

            <div class="form-group">
                <label
                    class="control-label"
                    data-translate="server_configuration_installation_ovh_stephardraid_label_space_total"
                >
                </label>
                <p
                    class="form-control-static"
                    data-ng-if="$ctrl.installation.hardwareRaid.totalSpace"
                    data-ng-bind="$ctrl.getDisplaySize($ctrl.installation.hardwareRaid.totalSpace, 'MB')"
                ></p>
            </div>

            <div class="form-group">
                <label
                    class="control-label"
                    data-translate="server_configuration_installation_ovh_stephardraid_label_space_available"
                >
                </label>
                <p
                    class="form-control-static"
                    data-ng-if="$ctrl.installation.hardwareRaid.availableSpace"
                    data-ng-bind="$ctrl.getDisplaySize($ctrl.installation.hardwareRaid.availableSpace, 'MB')"
                ></p>
            </div>

            <div
                class="alert alert-danger"
                role="alert"
                data-ng-if="$ctrl.installation.hardwareRaid.error"
                data-translate="server_configuration_installation_gabarit_step2_invalid"
            ></div>
        </form>
    </oui-step-form>

    <oui-step-form
        data-prevent-next="true"
        data-valid="!$ctrl.loader.loading
            && !$ctrl.newPartition.display
            && !$ctrl.setPartition.save
            && !$ctrl.setPartition.delModel
            && !$ctrl.configError.raidDiskUse
            && !$ctrl.errorInst.partitionSizeOver"
        data-on-focus="$ctrl.checkPrev1(); $ctrl.loadPartiton()"
        data-loading="$ctrl.loader.loading"
    >
        <p
            data-ng-hide="$ctrl.installation.partitionSchemesList.length > 0"
            data-translate="server_configuration_installation_ovh_step2_error_empty_scheme"
            data-translate-values="{ t0: $ctrl.data.server.name, t1: $ctrl.installation.selectDistribution.displayName }"
        ></p>

        <div data-ng-hide="$ctrl.installation.partitionSchemesList.length == 0">
            <div
                data-ng-bind-html="'server_configuration_installation_ovh_step2_info' | translate:{ t0: $ctrl.installation.selectDistribution.displayName }"
            ></div>

            <p data-ng-if="$ctrl.informations.isCachecade">
                <span class="icon-info-sign" aria-hidden="true"></span>
                <span
                    data-translate="server_configuration_installation_ovh_step2_info_partition_cachecade"
                ></span>
            </p>

            <div>
                <span
                    data-translate="server_configuration_installation_ovh_step2_type_disk"
                ></span>
                <select
                    class="form-control"
                    data-ng-show="$ctrl.informations.nbDisk > 1"
                    data-ng-options="nbdisk as nbdisk for nbdisk in $ctrl.constructor.getNbDisqueList($ctrl.informations.nbDisk)"
                    data-ng-model="$ctrl.installation.nbDiskUse"
                    data-ng-disabled="$ctrl.setPartition.indexSet != -1 || $ctrl.newPartition.display"
                >
                </select>
                <strong
                    data-ng-hide="$ctrl.informations.nbDisk > 1"
                    data-ng-bind="$ctrl.informations.nbPhysicalDisk"
                ></strong
                >&nbsp;
                <strong data-ng-bind="$ctrl.informations.typeDisk"></strong
                >&nbsp;
                <strong
                    data-ng-show="$ctrl.informations.raidController"
                    data-translate="server_configuration_installation_ovh_step2_raid_hard"
                >
                </strong
                >&nbsp;
                <span
                    data-translate="server_configuration_installation_ovh_step2_total_size"
                ></span>
                <strong
                    data-ng-bind="$ctrl.getDisplaySize($ctrl.informations.totalSize)"
                ></strong
                >&nbsp;
                <span
                    data-translate="server_configuration_installation_ovh_step2_remaining_size"
                ></span>
                <strong
                    data-ng-bind="$ctrl.getDisplaySize($ctrl.informations.remainingSize)"
                ></strong>
            </div>

            <div
                class="progress"
                data-ng-hide="$ctrl.errorInst.partitionSizeOver"
            >
                <div
                    class="progress-bar"
                    data-ng-hide="$ctrl.setPartition.delModel != null && progress.partition == $ctrl.installation.partitionSchemeModels[$ctrl.setPartition.delModel]"
                    data-ng-repeat="progress in $ctrl.bar.progress | orderBy:'partition.order'"
                    data-ng-style="{
                            'background': progress.partition.progressColor,
                            'width': progress.progressSize + '%'
                        }"
                ></div>
            </div>

            <div
                class="progress progress-danger progress-striped"
                data-ng-show="$ctrl.errorInst.partitionSizeOver"
            >
                <div class="bar" style="width: 100%"></div>
            </div>
            <div
                data-ng-show="$ctrl.informations.otherDisk.length > 0 && $ctrl.informations.showAllDisk"
                data-ng-repeat="disk in $ctrl.informations.otherDisk"
            >
                <div class="text-right">
                    <span
                        data-translate="server_configuration_installation_ovh_step2_type_disk_disable"
                    ></span>
                    <strong data-ng-bind="disk.nbDisk"></strong>&nbsp;
                    <strong data-ng-bind="disk.typeDisk"></strong>&nbsp;
                    (<strong
                        data-ng-bind="$ctrl.getDisplaySize(disk.sizeDisk)"
                    ></strong
                    >)
                </div>
                <div class="progress progress-info progress-striped">
                    <div class="bar" style="width: 100%"></div>
                </div>
            </div>

            <div
                class="text-right"
                data-ng-show="$ctrl.informations.otherDisk.length > 0"
            >
                <button
                    type="button"
                    class="btn btn-default"
                    data-ng-if="!$ctrl.informations.showAllDisk"
                    data-ng-click="$ctrl.informations.showAllDisk = true"
                    data-ng-bind=":: 'server_configuration_installation_ovh_step2_show_all_disk' | translate"
                ></button>
                <button
                    type="button"
                    class="btn btn-default"
                    data-ng-if="$ctrl.informations.showAllDisk"
                    data-ng-click="$ctrl.informations.showAllDisk = false"
                    data-ng-bind=":: 'server_configuration_installation_ovh_step2_hide_all_disk' | translate"
                ></button>
            </div>

            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th></th>
                            <th>
                                <span
                                    class="fa fa-question-circle"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_order_help' | translate }}"
                                    data-oui-tooltip-placement="right"
                                >
                                </span>
                            </th>
                            <th
                                data-translate="server_configuration_installation_ovh_step2_type"
                            ></th>
                            <th
                                data-translate="server_configuration_installation_ovh_step2_file_system"
                            ></th>
                            <th
                                data-translate="server_configuration_installation_ovh_step2_mount_point"
                            ></th>
                            <th
                                data-translate="server_configuration_installation_ovh_step2_volume_name"
                            ></th>
                            <th
                                data-ng-show="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                            >
                                <span
                                    data-translate="server_configuration_installation_ovh_step2_raid"
                                ></span>
                                <span
                                    class="icon-question-sign icon-white"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_raid_help' | translate }}"
                                    data-oui-tooltip-placement="left"
                                >
                                </span>
                            </th>
                            <th>
                                <span
                                    data-translate="server_configuration_installation_ovh_step2_available_size"
                                ></span>
                                <span
                                    class="icon-question-sign icon-white"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_size_help' | translate }}"
                                    data-oui-tooltip-placement="left"
                                >
                                </span>
                            </th>
                            <th
                                data-ng-show="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                            >
                                <span
                                    data-translate="server_configuration_installation_ovh_step2_size"
                                ></span>
                                <span
                                    class="icon-question-sign icon-white"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_size_help' | translate }}"
                                    data-oui-tooltip-placement="left"
                                >
                                </span>
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr
                            data-ng-repeat="partition in $ctrl.installation.partitionSchemeModels | orderBy:'orderTable'"
                            data-ng-class="{
                                'deleting': partition == $ctrl.installation.partitionSchemeModels[$ctrl.setPartition.delModel]
                            }"
                        >
                            <td>
                                <span
                                    class="label"
                                    data-ng-style="{ 'background': partition.progressColor }"
                                >
                                    &nbsp;
                                </span>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && hasErrorOrder()
                                }"
                            >
                                <span
                                    data-ng-if="!$ctrl.isSetPartition(partition)"
                                    data-ng-bind="partition.order"
                                >
                                </span>
                                <input
                                    type="number"
                                    class="form-control"
                                    min="1"
                                    max="99"
                                    data-ng-if="$ctrl.isSetPartition(partition)"
                                    data-ng-model="partition.order"
                                    data-ng-change="$ctrl.validationOrder(partition)"
                                />
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && $ctrl.hasErrorType()
                                }"
                            >
                                <span
                                    data-ng-if="!$ctrl.isSetPartition(partition)"
                                    data-translate="{{ 'server_configuration_installation_' + partition.typePartition }}"
                                >
                                </span>
                                <select
                                    class="form-control"
                                    data-ng-if="$ctrl.isSetPartition(partition)"
                                    data-ng-options="type as ('server_configuration_installation_' + type | translate) for type in $ctrl.data.partitionTypeList"
                                    data-ng-model="partition.typePartition"
                                    data-ng-change="$ctrl.validationType(partition)"
                                >
                                </select>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && $ctrl.hasErrorFileSystem()
                                }"
                            >
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) && partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-translate="{{ 'server_configuration_installation_' + partition.fileSystem }}"
                                >
                                </span>
                                <select
                                    class="form-control"
                                    data-ng-if="$ctrl.isSetPartition(partition) && partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-options="fileSystem as ('server_configuration_installation_' + fileSystem | translate) for fileSystem in $ctrl.data.fileSystemList"
                                    data-ng-model="partition.fileSystem"
                                    data-ng-change="$ctrl.validationFileSystem(partition)"
                                >
                                </select>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && $ctrl.hasErrorMountPoint()
                                }"
                            >
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) && partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-bind="partition.mountPoint"
                                >
                                </span>
                                <input
                                    type="text"
                                    class="form-control"
                                    data-ng-if="$ctrl.isSetPartition(partition) && partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-model="partition.mountPoint"
                                    data-ng-required="true"
                                    data-ng-change="$ctrl.validationMountPoint(partition)"
                                    data-ng-disabled="!$ctrl.validation.hasSwap && partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                />
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && $ctrl.hasErrorVolumeName()
                                }"
                            >
                                <span
                                    data-ng-show="partition.typePartition != $ctrl.WARNING.WARNING_LV || $ctrl.errorInst.typeLvSwap"
                                >
                                    -
                                </span>
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) || partition.typePartition != $ctrl.WARNING.WARNING_LV"
                                    data-ng-bind="partition.volumeName"
                                >
                                </span>
                                <input
                                    type="text"
                                    data-ng-show="$ctrl.isSetPartition(partition) && partition.typePartition == $ctrl.WARNING.WARNING_LV && !$ctrl.errorInst.typeLvSwap"
                                    data-ng-model="partition.volumeName"
                                    data-ng-required="partition.typePartition == $ctrl.WARNING.WARNING_LV"
                                    data-ng-change="$ctrl.validationVolumeName(partition)"
                                />
                            </td>
                            <td
                                class="form-group"
                                data-ng-show="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && $ctrl.hasErrorRaid()
                                }"
                            >
                                <span
                                    data-ng-show="partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                >
                                    -
                                </span>
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) || partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-bind="partition.raid.replace('_', '')"
                                >
                                </span>
                                <select
                                    class="form-control"
                                    data-ng-if="$ctrl.isSetPartition(partition) && partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-options="raid as raid.replace('_', '') for raid in $ctrl.getRaidList($ctrl.installation.nbDiskUse)"
                                    data-ng-model="partition.raid"
                                    data-ng-change="$ctrl.validationRaid(partition)"
                                >
                                </select>
                                <span
                                    class="oui-icon oui-icon-warning-circle"
                                    aria-label="{{ 'server_configuration_installation_ovh_step2_error_raid_diskUse_icon' | translate }}"
                                    data-ng-show="partition.hasWarning && !$ctrl.isSetPartition(partition)"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_error_raid_diskUse_icon' | translate }}"
                                    data-oui-tooltip-placement="top"
                                >
                                </span>
                                <span
                                    class="oui-icon oui-icon-warning-circle"
                                    aria-label="{{ 'server_configuration_installation_ovh_step2_error_raid_0' | translate }}"
                                    data-ng-show="!partition.hasWarning && !$ctrl.isSetPartition(partition) && partition.raid == $ctrl.WARNING.WARNING_RAID0"
                                    data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_error_raid_0' | translate }}"
                                    data-oui-tooltip-placement="top"
                                >
                                </span>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.isSetPartition(partition) && $ctrl.hasErrorSize()
                                }"
                            >
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) || partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-bind="$ctrl.installation.nbDiskUse"
                                >
                                </span>
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) || partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                >
                                    x
                                </span>
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) || partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-bind="$ctrl.getDisplaySize(partition.partitionSize)"
                                >
                                </span>

                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition) || partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                    data-ng-bind="$ctrl.getDisplaySize(partition.partitionSize)"
                                >
                                </span>
                                <div class="input-group">
                                    <span
                                        class="input-group-btn"
                                        data-ng-show="$ctrl.isSetPartition(partition)"
                                    >
                                        <button
                                            type="button"
                                            class="btn btn-default"
                                            data-ng-click="$ctrl.getFullSize(partition)"
                                            title="{{ 'server_configuration_installation_ovh_step2_remaining_size_button' | translate }}"
                                        >
                                            <span
                                                class="fa fa-expand"
                                                aria-hidden="true"
                                            ></span>
                                        </button>
                                    </span>
                                    <input
                                        type="number"
                                        class="form-control"
                                        maxlength="10"
                                        max="9999999999"
                                        data-ng-show="$ctrl.isSetPartition(partition)"
                                        data-ng-model="partition.partitionSize"
                                        data-ng-change="$ctrl.validationSize(partition)"
                                    />
                                    <span
                                        class="input-group-addon"
                                        data-ng-show="$ctrl.isSetPartition(partition)"
                                        data-translate="unit_size_MB"
                                    >
                                    </span>
                                </div>
                            </td>
                            <td
                                data-ng-show="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                            >
                                <span
                                    data-ng-hide="$ctrl.isSetPartition(partition)"
                                    data-ng-bind="$ctrl.getRealDisplaySize({partition: partition})"
                                >
                                </span>
                                <span
                                    data-ng-show="$ctrl.isSetPartition(partition)"
                                    data-ng-bind="$ctrl.getRealDisplaySize({
                                            partition: partition,
                                            multiplicator: partition.unit.value
                                        })"
                                >
                                </span>
                            </td>
                            <td>
                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-hide="$ctrl.setPartition.save || $ctrl.newPartition.display || $ctrl.setPartition.delModel != null"
                                    data-ng-click="!$ctrl.setPartition.save && !$ctrl.newPartition.display && $ctrl.setPartition.delModel == null && $ctrl.displaySetPartition(partition)"
                                >
                                    <span
                                        class="oui-icon oui-icon-pen_concept"
                                        aria-hidden="true"
                                    ></span>
                                </button>
                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-hide="!partition.canBeDelete || $ctrl.setPartition.save || $ctrl.newPartition.display || $ctrl.setPartition.delModel != null"
                                    data-ng-click="partition.canBeDelete && !$ctrl.setPartition.save && !$ctrl.newPartition.display && $ctrl.setPartition.delModel == null && $ctrl.deletePartition(partition)"
                                >
                                    <span
                                        class="oui-icon oui-icon-trash_concept"
                                        aria-hidden="true"
                                    ></span>
                                </button>

                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-show="!$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.displayAddConfirmation && $ctrl.isSetPartition(partition) && !$ctrl.newPartition.display && !$ctrl.errorInst.partitionSizeOver"
                                    data-ng-click="!$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.displayAddConfirmation && $ctrl.isSetPartition(partition) && !$ctrl.newPartition.display && !$ctrl.errorInst.partitionSizeOver && $ctrl.validSetPartition()"
                                >
                                    <span
                                        class="oui-icon oui-icon-success"
                                        aria-hidden="true"
                                    ></span>
                                </button>
                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-show="!$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.displayAddConfirmation && $ctrl.isSetPartition(partition) && !$ctrl.newPartition.display"
                                    data-ng-click="!$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.displayAddConfirmation && $ctrl.isSetPartition(partition) && !$ctrl.newPartition.display && $ctrl.cancelSetPartition()"
                                >
                                    <span
                                        class="oui-icon oui-icon-error"
                                        aria-hidden="true"
                                    ></span>
                                </button>
                                <oui-spinner
                                    data-ng-show="$ctrl.buttonControl.setInProgress && $ctrl.isSetPartition(partition)"
                                    data-size="s"
                                >
                                </oui-spinner>
                            </td>
                        </tr>
                        <tr data-ng-show="$ctrl.newPartition.display">
                            <td>
                                <div
                                    class="pellet"
                                    style="margin: auto;"
                                    data-ng-style="{ 'background': $ctrl.newPartition.progressColor}"
                                ></div>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': hasErrorOrder()
                                }"
                            >
                                <input
                                    type="number"
                                    min="1"
                                    max="99"
                                    class="form-control"
                                    data-ng-model="$ctrl.newPartition.order"
                                    data-ng-change="$ctrl.validationOrder($ctrl.newPartition)"
                                />
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.hasErrorType()
                                }"
                            >
                                <select
                                    class="form-control"
                                    data-ng-options="type as ('server_configuration_installation_' + type | translate) for type in $ctrl.data.partitionTypeList"
                                    data-ng-model="$ctrl.newPartition.typePartition"
                                    data-ng-change="$ctrl.validationType($ctrl.newPartition)"
                                >
                                </select>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.hasErrorFileSystem()
                                }"
                            >
                                <select
                                    class="form-control"
                                    data-ng-options="fileSystem as ('server_configuration_installation_' + fileSystem | translate) for fileSystem in $ctrl.data.fileSystemList"
                                    data-ng-model="$ctrl.newPartition.fileSystem"
                                    data-ng-change="$ctrl.validationFileSystem($ctrl.newPartition)"
                                >
                                </select>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.hasErrorMountPoint()
                                }"
                            >
                                <input
                                    type="text"
                                    class="form-control"
                                    data-ng-model="$ctrl.newPartition.mountPoint"
                                    data-ng-required="true"
                                    data-ng-change="$ctrl.validationMountPoint($ctrl.newPartition)"
                                    data-ng-disabled="!$ctrl.validation.hasSwap && $ctrl.newPartition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                />
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.hasErrorVolumeName()
                                }"
                            >
                                <span
                                    data-ng-show="$ctrl.newPartition.typePartition != $ctrl.WARNING.WARNING_LV"
                                >
                                    -
                                </span>
                                <input
                                    type="text"
                                    class="form-control"
                                    data-ng-show="$ctrl.newPartition.typePartition == $ctrl.WARNING.WARNING_LV"
                                    data-ng-model="$ctrl.newPartition.volumeName"
                                    data-ng-change="$ctrl.validationVolumeName($ctrl.newPartition)"
                                    data-ng-disabled="$ctrl.newPartition.typePartition != $ctrl.WARNING.WARNING_LV"
                                />
                            </td>
                            <td
                                class="form-group"
                                data-ng-show="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                                data-ng-class="{
                                    'has-error': $ctrl.hasErrorRaid()
                                }"
                            >
                                <select
                                    class="form-control"
                                    data-ng-options="raid as raid.replace('_','') for raid in $ctrl.getRaidList($ctrl.installation.nbDiskUse)"
                                    data-ng-model="$ctrl.newPartition.raid"
                                    data-ng-change="$ctrl.validationRaid($ctrl.newPartition)"
                                >
                                </select>
                            </td>
                            <td
                                class="form-group"
                                data-ng-class="{
                                    'has-error': $ctrl.hasErrorSize()
                                }"
                            >
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button
                                            type="button"
                                            class="btn btn-default"
                                            title="{{ 'server_configuration_installation_ovh_step2_remaining_size_button' | translate }}"
                                            data-ng-click="$ctrl.getFullSize($ctrl.newPartition)"
                                        >
                                            <span
                                                class="fa fa-expand"
                                                aria-hidden="true"
                                            ></span>
                                        </button>
                                    </span>
                                    <input
                                        type="number"
                                        class="form-control"
                                        maxlength="10"
                                        max="9999999999"
                                        data-ng-model="$ctrl.newPartition.partitionSize"
                                        data-ng-change="$ctrl.validationSize($ctrl.newPartition)"
                                    />
                                    <span
                                        class="input-group-addon"
                                        data-translate="unit_size_MB"
                                    >
                                    </span>
                                </div>
                            </td>
                            <td
                                data-ng-show="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                                data-ng-bind="$ctrl.getRealDisplaySize({partition: $ctrl.newPartition, multiplicator: $ctrl.newPartition.unit.value})"
                            ></td>
                            <td>
                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-hide="$ctrl.buttonControl.displayAddConfirmation || $ctrl.buttonControl.addInProgress"
                                    data-ng-click="!$ctrl.buttonControl.addInProgress && $ctrl.validAddPartition()"
                                >
                                    <span
                                        class="oui-icon oui-icon-success"
                                        aria-hidden="true"
                                    ></span>
                                </button>
                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-ng-hide="$ctrl.buttonControl.displayAddConfirmation || $ctrl.buttonControl.addInProgress"
                                    data-ng-click="!$ctrl.buttonControl.addInProgress && $ctrl.cancelAddPartition()"
                                >
                                    <span
                                        class="oui-icon oui-icon-error"
                                        aria-hidden="true"
                                    ></span>
                                </button>
                                <oui-spinner
                                    data-ng-show="$ctrl.buttonControl.addInProgress"
                                    data-size="s"
                                >
                                </oui-spinner>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="text-center">
                <button
                    type="button"
                    class="btn btn-default"
                    data-ng-hide="$ctrl.setPartition.delModel != null || $ctrl.setPartition.save || $ctrl.newPartition.display"
                    data-ng-click="$ctrl.displayNewPartition()"
                    data-ng-disabled="$ctrl.configError.raidDiskUse"
                    data-translate="server_configuration_installation_ovh_step2_add"
                ></button>
                <button
                    type="button"
                    class="btn btn-danger"
                    data-ng-show="$ctrl.setPartition.delModel != null"
                    data-ng-click="!$ctrl.buttonControl.deleteInProgress && $ctrl.deleteValidPartition()"
                    data-translate="server_configuration_installation_ovh_step2_del"
                ></button>
                <button
                    type="button"
                    class="btn btn-default"
                    data-ng-show="$ctrl.setPartition.delModel != null"
                    data-ng-click="!$ctrl.buttonControl.deleteInProgress && $ctrl.deleteCancelPartition()"
                    data-translate="server_configuration_installation_ovh_step2_del_cancel"
                ></button>

                <button
                    type="button"
                    class="btn btn-link"
                    data-ng-show="$ctrl.buttonControl.displayAddConfirmation && !$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.addInProgress"
                    data-ng-click="$ctrl.validPartition()"
                    data-translate="server_configuration_installation_ovh_step2_raid0_add"
                ></button>
                <button
                    type="button"
                    class="btn btn-default"
                    data-ng-show="$ctrl.buttonControl.displayAddConfirmation && !$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.addInProgress"
                    data-ng-click="!$ctrl.buttonControl.setInProgress && !$ctrl.buttonControl.addInProgress && $ctrl.cancelRaid0Partition()"
                    data-translate="server_configuration_installation_ovh_step2_raid0_cancel"
                ></button>
            </div>

            <div>
                <ul>
                    <li data-ng-show="$ctrl.warning.raid0">
                        <i style="margin-right: 5px;" class="icon-warning"></i
                        ><span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_warning_partition_raid0"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.raid0">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_raid0"
                            data-translate-values="{ t0: $ctrl.newPartition.display && $ctrl.newPartition.mountPoint || $ctrl.installation.partitionSchemeModels[$ctrl.setPartition.indexSet].mountPoint }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeToAdd">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_add"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeOver">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_exceed"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.order">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_order"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.orderFirst">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_order_first"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.orderFirstWin">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_order_first_win"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.typePrimary">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_type_primary"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.volumeNameEmpty">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_volumename_empty"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.volumeName">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_volumename_wrong"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.volumeNameUse">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_volumename_use"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.mountPointEmpty">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_empty"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.mountPointUse">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_use"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.mountPoint">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_wrong"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.mountPoint2">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_wrong2"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.mountPointPrimary">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_primary"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.mountPointWindows">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_mountPoint_windows"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.fileSystemSwap">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_file_system_swap"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.fileSystemNoSwap">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_file_system_no_swap"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeSwap">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_swap"
                            data-translate-values="{ t0: $ctrl.getDisplaySize($ctrl.SIZE.MAX_SIZE_SWAP) }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSize">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_max"
                            data-translate-values="{ t0: $ctrl.getDisplaySize($ctrl.SIZE.MAX_SIZE_PARTITION) }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeWindows">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_windows"
                            data-translate-values="{ t0: $ctrl.getDisplaySize($ctrl.SIZE.MIN_SIZE_WINDOWS) }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeReiserfs">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_reiserfs"
                            data-translate-values="{ t0: $ctrl.getDisplaySize($ctrl.SIZE.MIN_SIZE_REISERFS) }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeBoot">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_min_boot"
                            data-translate-values="{ t0: $ctrl.getDisplaySize($ctrl.SIZE.MIN_SIZE_BOOT) }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.partitionSizeMin">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_size_min"
                            data-translate-values="{ t0: $ctrl.getDisplaySize($ctrl.SIZE.MIN_SIZE_PARTITION) }"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.orderType">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_type_order"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.typeLvSwap">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_type_lv_swap"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.typeLogicalLv">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_type_logical_lv"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.raidLv">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_partition_raid_LV"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.configError.raidDiskUse">
                        <span
                            class="red"
                            data-translate="server_configuration_installation_ovh_step2_error_raid_diskUse"
                        ></span>
                    </li>
                    <li data-ng-show="$ctrl.errorInst.ws">
                        <span
                            class="red"
                            data-ng-bind-html="$ctrl.errorInst.ws"
                        ></span>
                    </li>
                </ul>
            </div>
        </div>
    </oui-step-form>

    <oui-step-form
        data-prevent-next="true"
        data-valid="!$ctrl.errorInst.ws
            && !$ctrl.configError.raidDiskUse
            && $ctrl.installation.options.validForm
            && !$ctrl.loader.loading"
        data-on-focus="$ctrl.checkCustomPrevFinal(); $ctrl.checkIntegrity()"
        data-loading="$ctrl.loader.loading"
    >
        <p
            data-translate="server_configuration_installation_ovh_step3_info"
        ></p>

        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">
                            <span
                                class="icon-question-sign icon-white"
                                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_order_help' | translate }}"
                                data-oui-tooltip-placement="right"
                            >
                            </span>
                        </th>
                        <th
                            scope="col"
                            data-translate="server_configuration_installation_ovh_step2_type"
                        ></th>
                        <th
                            scope="col"
                            data-translate="server_configuration_installation_ovh_step2_file_system"
                        ></th>
                        <th
                            scope="col"
                            data-translate="server_configuration_installation_ovh_step2_mount_point"
                        ></th>
                        <th
                            scope="col"
                            data-translate="server_configuration_installation_ovh_step2_volume_name"
                        ></th>
                        <th
                            scope="col"
                            data-ng-if="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                        >
                            <span
                                data-translate="server_configuration_installation_ovh_step2_raid"
                            ></span>
                            <span
                                class="icon-question-sign icon-white"
                                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_raid_help' | translate }}"
                                data-oui-tooltip-placement="left"
                            >
                            </span>
                        </th>
                        <th scope="col">
                            <span
                                data-translate="server_configuration_installation_ovh_step2_available_size"
                            ></span>
                            <span
                                class="icon-question-sign icon-white"
                                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_available_size_help' | translate }}"
                                data-oui-tooltip-placement="left"
                            >
                            </span>
                        </th>
                        <th
                            scope="col"
                            data-ng-if="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                        >
                            <span
                                data-translate="server_configuration_installation_ovh_step2_size"
                            ></span>
                            <span
                                class="icon-question-sign icon-white"
                                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_size_help' | translate }}"
                                data-oui-tooltip-placement="left"
                            >
                            </span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr
                        data-ng-repeat="partition in $ctrl.installation.partitionSchemeModels | orderBy:'orderTable' track by $index"
                    >
                        <th scope="row" data-ng-bind="partition.order"></th>
                        <td
                            data-translate="{{ 'server_configuration_installation_' + partition.typePartition }}"
                        ></td>
                        <td
                            data-translate="{{ 'server_configuration_installation_' + partition.fileSystem }}"
                        ></td>
                        <td data-ng-bind="partition.mountPoint"></td>
                        <td>
                            <span
                                data-ng-if="partition.typePartition != $ctrl.WARNING.WARNING_LV"
                            >
                                -
                            </span>
                            <span
                                data-ng-if="partition.typePartition == $ctrl.WARNING.WARNING_LV"
                                data-ng-bind="partition.volumeName"
                            >
                            </span>
                        </td>
                        <td
                            data-ng-if="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                        >
                            <span
                                data-ng-if="partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                            >
                                -
                            </span>
                            <span
                                data-ng-if="partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                data-ng-bind="partition.raid.replace('_', '')"
                            >
                            </span>
                            <span
                                class="icon-warning"
                                data-ng-if="partition.hasWarning"
                                data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step2_error_raid_diskUse_icon' | translate }}"
                                data-oui-tooltip-placement="top"
                            >
                            </span>
                        </td>
                        <td>
                            <span
                                data-ng-if="partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                data-ng-bind="$ctrl.installation.nbDiskUse"
                            >
                            </span>
                            <span
                                data-ng-if="partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                            >
                                x
                            </span>
                            <span
                                data-ng-if="partition.fileSystem == $ctrl.WARNING.WARNING_SWAP"
                                data-ng-bind="$ctrl.getDisplaySize(partition.partitionSize)"
                            >
                            </span>
                            <span
                                data-ng-if="partition.fileSystem != $ctrl.WARNING.WARNING_SWAP"
                                data-ng-bind="$ctrl.getDisplaySize(partition.partitionSize)"
                            >
                            </span>
                        </td>
                        <td
                            data-ng-if="$ctrl.installation.nbDiskUse > 1 && !$ctrl.informations.raidController"
                            data-ng-bind="$ctrl.getRealDisplaySize({ partition: partition })"
                        ></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="mt-4">
            <h5 data-translate="server_configuration_installation_resume"></h5>
            <dl>
                <dt
                    data-translate="server_configuration_installation_ovh_step3_server"
                ></dt>
                <dd data-ng-bind="$ctrl.data.server.name"></dd>
                <dt
                    data-translate="server_configuration_installation_ovh_step3_os"
                ></dt>
                <dd
                    data-ng-bind="$ctrl.installation.selectDistribution.displayName"
                ></dd>
                <dt
                    data-translate="server_configuration_installation_ovh_step3_lang"
                ></dt>
                <dd data-ng-bind="$ctrl.installation.selectLanguage"></dd>
                <dt
                    data-translate="server_configuration_installation_ovh_step3_disk_group"
                ></dt>
                <dd
                    data-ng-bind="$ctrl.installation.diskGroup.description"
                ></dd>
                <dt
                    data-translate="server_configuration_installation_ovh_step3_custom"
                ></dt>
                <dd>
                    <span
                        data-ng-if="$ctrl.installation.customInstall"
                        data-translate="wizard_yes"
                    >
                    </span>
                    <span
                        data-ng-if="!$ctrl.installation.customInstall"
                        data-translate="wizard_no"
                    >
                    </span>
                </dd>
            </dl>

            <div data-ng-if="$ctrl.installation.hardwareRaid.raid">
                <h5
                    data-translate="server_configuration_installation_resume_hardwareRaid"
                ></h5>
                <dl>
                    <dt
                        data-translate="server_configuration_installation_ovh_stephardraid_label_controllers"
                    ></dt>
                    <dd
                        data-ng-bind="$ctrl.installation.hardwareRaid.controller.model + ' (' + $ctrl.installation.hardwareRaid.controller.type + ')'"
                    ></dd>
                    <dt
                        data-translate="server_configuration_installation_ovh_stephardraid_label_disks"
                    ></dt>
                    <dd
                        data-ng-bind="$ctrl.installation.hardwareRaid.disks"
                    ></dd>
                    <dt
                        data-translate="server_configuration_installation_ovh_stephardraid_label_raid"
                    ></dt>
                    <dd
                        data-ng-bind="$ctrl.installation.hardwareRaid.raid"
                    ></dd>
                </dl>
            </div>

            <h5
                data-translate="server_configuration_installation_form_option"
            ></h5>
            <form
                id="optionForm"
                name="optionForm"
                data-ng-controller="ServerInstallationFormCtrl"
            >
                <!-- saveGabarit -->
                <label>
                    <span
                        data-translate="server_configuration_installation_ovh_step3_saveGabarit"
                    ></span>
                    <span
                        class="fa fa-question-circle"
                        aria-label="{{ 'server_configuration_installation_ovh_step3_saveGabarit_help' | translate }}"
                        data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step3_saveGabarit_help' | translate }}"
                        data-oui-tooltip-placement="right"
                    >
                    </span>
                </label>
                <oui-switch
                    id="saveGabarit"
                    name="saveGabarit"
                    data-model="$ctrl.installation.options.saveGabarit"
                    data-on-change="nameGabaritValidator()"
                ></oui-switch>

                <!-- gabaritNameSave -->
                <div
                    class="form-group"
                    data-ng-show="$ctrl.installation.options.saveGabarit == true"
                    data-ng-class="{
                            'has-error': optionForm.gabaritNameSave.$invalid && optionForm.$dirty
                        }"
                >
                    <label
                        for="gabaritNameSave"
                        class="control-label"
                        data-translate="server_configuration_installation_form_gabaritNameSave"
                    >
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        id="gabaritNameSave"
                        name="gabaritNameSave"
                        data-ng-model="$ctrl.installation.options.gabaritNameSave"
                        data-ng-change="nameGabaritValidator()"
                        data-ng-required="$ctrl.installation.options.saveGabarit"
                        data-ng-trim="true"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="optionForm.gabaritNameSave.$invalid && optionForm.$dirty"
                        data-translate="server_configuration_installation_form_gabaritNameSave_pattern"
                    >
                    </span>
                </div>

                <!-- variablePartition -->
                <div
                    class="form-group"
                    data-ng-show="$ctrl.installation.customInstall && $ctrl.installation.options.saveGabarit == true && $ctrl.installation.variablePartition != null"
                >
                    <label for="variablePartition" class="control-label">
                        <span
                            data-translate="server_configuration_installation_ovh_step3_partiton_variable"
                        ></span
                        >&nbsp;
                        <span
                            class="icon-warning"
                            data-oui-tooltip="{{:: 'server_configuration_installation_ovh_step3_partiton_variable_help' | translate }}"
                            data-oui-tooltip-placement="right"
                        >
                        </span>
                    </label>
                    <select
                        class="form-control"
                        id="variablePartition"
                        data-ng-options="partition as partition.mountPoint for partition in $ctrl.getMountPoint()"
                        data-ng-model="$ctrl.installation.options.variablePartition"
                    >
                        <option
                            value
                            data-ng-bind=":: 'server_configuration_installation_ovh_step3_partiton_none' | translate"
                        >
                        </option>
                    </select>
                </div>

                <!-- changeLog -->
                <div
                    class="form-group"
                    data-ng-show="$ctrl.installation.options.saveGabarit == true"
                >
                    <label
                        for="changeLog"
                        class="control-label"
                        data-translate="server_configuration_installation_form_changeLog"
                    >
                    </label>
                    <textarea
                        class="form-control"
                        id="changeLog"
                        name="changeLog"
                        rows="1"
                        data-ng-model="$ctrl.installation.options.changeLog"
                    >
                    </textarea>
                </div>

                <!-- customHostname -->
                <div
                    class="form-group"
                    data-ng-class="{
                        'has-error': optionForm.customHostname.$invalid && optionForm.$dirty
                    }"
                >
                    <label
                        for="customHostname"
                        class="control-label"
                        data-translate="server_configuration_installation_form_customHostname"
                    >
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        id="customHostname"
                        name="customHostname"
                        data-ng-model="$ctrl.installation.options.customHostname"
                        data-ng-pattern="/^[a-zA-Z0-9._-]{1,50}$/"
                        data-ng-trim="true"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="optionForm.customHostname.$invalid && optionForm.$dirty"
                        data-translate="server_configuration_installation_form_customHostname_pattern"
                    >
                    </span>
                </div>

                <!-- postInstallationScriptLink -->
                <div
                    class="form-group"
                    data-ng-class="{
                            'has-error': optionForm.postInstallationScriptLink.$invalid && optionForm.$dirty
                        }"
                >
                    <label
                        for="postInstallationScriptLink"
                        class="control-label"
                    >
                        <span
                            data-translate="server_configuration_installation_form_postInstallationScriptLink"
                        ></span
                        >&nbsp;
                        <span
                            class="fa fa-question-circle"
                            data-oui-tooltip="{{:: 'server_configuration_installation_form_postInstallationScriptLink_help' | translate }}"
                            data-oui-tooltip-placement="right"
                        >
                        </span>
                    </label>
                    <input
                        type="text"
                        name="postInstallationScriptLink"
                        id="postInstallationScriptLink"
                        class="form-control"
                        data-ng-model="$ctrl.installation.options.postInstallationScriptLink"
                        data-ng-change="postInstallationScriptLinkValidator()"
                        data-ng-trim="true"
                    />
                    <span
                        class="help-block"
                        role="alert"
                        data-ng-if="optionForm.postInstallationScriptLink.$invalid && optionForm.$dirty"
                    >
                        <span
                            data-ng-if="value"
                            data-ng-repeat="(error, value) in optionForm.postInstallationScriptLink.$error"
                        >
                            {{
                            ('server_configuration_installation_form_postInstallationScriptLink_'
                            + error) | ducTranslateAlt: error }}
                        </span>
                    </span>
                </div>

                <!-- postInstallationScriptReturn -->
                <div
                    class="form-group"
                    data-ng-show="$ctrl.installation.options.postInstallationScriptLink != null && $ctrl.installation.options.postInstallationScriptLink != ''"
                >
                    <label
                        for="postInstallationScriptReturn"
                        class="control-label"
                    >
                        <span
                            data-translate="server_configuration_installation_form_postInstallationScriptLinkReturn"
                        ></span>
                        <span
                            class="fa fa-question-circle"
                            data-oui-tooltip="{{:: 'server_configuration_installation_form_postInstallationScriptLinkReturn_help' | translate }}"
                            data-oui-tooltip-placement="right"
                        >
                        </span>
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        id="postInstallationScriptReturn"
                        name="postInstallationScriptReturn"
                        data-ng-model="$ctrl.installation.options.postInstallationScriptReturn"
                        data-ng-trim="true"
                    />
                </div>

                <!-- useDistributionKernel -->
                <div
                    class="checkbox"
                    data-ng-show="$ctrl.installation.selectDistribution.supportsDistributionKernel"
                >
                    <label>
                        <input
                            type="checkbox"
                            data-ng-model="$ctrl.installation.options.useDistributionKernel"
                        />
                        <span
                            data-translate="server_configuration_installation_form_useDistribKernel"
                        ></span>
                    </label>
                </div>

                <!-- installSqlServer -->
                <div
                    class="checkbox"
                    data-ng-show="$ctrl.installation.selectDistribution.supportsSqlServer"
                >
                    <label>
                        <input
                            type="checkbox"
                            data-ng-model="$ctrl.installation.options.installSqlServer"
                        />
                        <span
                            data-translate="server_configuration_installation_form_installSqlServer"
                        ></span>
                    </label>
                </div>

                <!-- useSpla -->
                <div
                    class="checkbox"
                    data-ng-show="$ctrl.installation.selectDistribution.family == $ctrl.WARNING.WARNING_WINDOWS"
                >
                    <label>
                        <input
                            type="checkbox"
                            data-ng-model="$ctrl.installation.options.useSpla"
                        />
                        <span
                            data-translate="server_configuration_installation_form_useSpla"
                        ></span>
                    </label>
                </div>

                <!-- sshKeyName -->
                <div
                    class="form-group"
                    data-ng-hide="$ctrl.installation.selectDistribution.family == $ctrl.WARNING.WARNING_WINDOWS"
                >
                    <label for="sshKeyName" class="control-label">
                        <span
                            data-translate="server_configuration_installation_form_ssh"
                        ></span
                        >&nbsp;
                        <span
                            class="fa fa-question-circle"
                            data-oui-tooltip="{{:: 'server_configuration_installation_form_ssh_help' | translate }}"
                            data-oui-tooltip-placement="right"
                        >
                        </span>
                    </label>
                    <select
                        class="form-control"
                        id="sshKeyName"
                        name="sshKeyName"
                        data-ng-if="!$ctrl.sshList.error"
                        data-ng-options="sskkey for sskkey in $ctrl.sshList.model"
                        data-ng-model="$ctrl.installation.options.sshKeyName"
                    >
                        <option
                            value
                            data-translate="server_configuration_installation_form_ssh_no"
                        >
                        </option>
                    </select>
                    <p
                        class="form-control-static text-danger"
                        data-ng-if="$ctrl.sshList.error"
                        data-translate="server_configuration_installation_form_ssh_fail"
                    ></p>
                </div>

                <!-- nbDisk -->
                <div
                    class="form-group"
                    data-ng-show="$ctrl.informations.nbDisk > 1 && !$ctrl.installation.customInstall"
                >
                    <label
                        for="nbDiskUse"
                        class="control-label"
                        data-translate="server_configuration_installation_form_nbdisk"
                    >
                    </label>
                    <select
                        class="form-control"
                        id="nbDiskUse"
                        name="nbDiskUse"
                        data-ng-options="nbdisk as nbdisk for nbdisk in $ctrl.constructor.getNbDisqueList($ctrl.informations.nbDisk)"
                        data-ng-model="$ctrl.installation.nbDiskUse"
                    >
                    </select>
                </div>

                <div
                    data-ng-if="$ctrl.configError.raidDiskUse || ($ctrl.installation.options.variablePartition && $ctrl.installation.options.saveGabarit)"
                >
                    <p
                        class="text-danger"
                        data-ng-if="$ctrl.configError.raidDiskUse"
                        data-translate="server_configuration_installation_ovh_step2_error_raid_diskUse"
                    ></p>
                    <p
                        class="text-danger"
                        data-ng-if="$ctrl.installation.options.variablePartition && $ctrl.installation.options.saveGabarit"
                        data-translate="server_configuration_installation_ovh_step3_partiton_variable_info"
                        data-translate-values="{ t0: $ctrl.installation.options.variablePartition.mountPoint }"
                    ></p>
                </div>
            </form>
        </div>
        <div data-ng-if="$ctrl.errorInst.ws">
            <p class="text-danger" data-ng-bind-html="$ctrl.errorInst.ws"></p>
            <p
                data-ng-if="$ctrl.errorInst.ws"
                data-translate="server_configuration_installation_ovh_step3_error_integrity_info"
            ></p>
        </div>
        <p
            class="text-danger"
            data-ng-if="$ctrl.errorInst.wsinstall"
            data-ng-bind-html="$ctrl.errorInst.wsinstall"
        ></p>
    </oui-step-form>
</oui-stepper>
